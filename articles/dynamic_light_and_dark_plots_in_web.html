<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light">
<script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Dynamic Light and Dark Plots in Web • sfthemes</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)">
<!-- preferably CSS --><link rel="stylesheet" href="../preferably.css">
<link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)">
<!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Dynamic Light and Dark Plots in Web">
<meta property="og:description" content="A guide to dynamically show a light/dark plot in a website based on the user's preference.">
<meta property="og:image" content="https://amirmasoudabdol.github.io/sfthemes/articles/images/dynamic-light-and-dark-static.png">
<meta property="og:image:alt" content="An accessible set of themes and color palettes optimized for light/dark appearances, and different screen sizes">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@amirmasoudabdol">
<meta name="twitter:site" content="https://amirmasoudabdol.name">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!-- Custom Analytics --><script async defer data-domain="sfthemes.amirmasoudabdol.name" src="https://stats.sfthemes.amirmasoudabdol.name/js/index.js"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sfthemes</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/colours.html">Colours</a>
    </li>
    <li>
      <a href="../articles/typography.html">Typography</a>
    </li>
    <li>
      <a href="../articles/size_classes.html">Size Classes</a>
    </li>
    <li>
      <a href="../articles/dynamic_light_and_dark_plots_in_web.html">Dynamic Light and Dark Plots in Web</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/amirmasoudabdol/sfthemes/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
        
        
          <li>
            <a href="https://github.com/sponsors/amirmasoudabdol/" style="margin-top: -2px !important">
              <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" width="24" height="24"><path fill-rule="evenodd" class="github-love" d="M6.736 4C4.657 4 2.5 5.88 2.5 8.514c0 3.107 2.324 5.96 4.861 8.12a29.66 29.66 0 004.566 3.175l.073.041.073-.04c.271-.153.661-.38 1.13-.674.94-.588 2.19-1.441 3.436-2.502 2.537-2.16 4.861-5.013 4.861-8.12C21.5 5.88 19.343 4 17.264 4c-2.106 0-3.801 1.389-4.553 3.643a.75.75 0 01-1.422 0C10.537 5.389 8.841 4 6.736 4zM12 20.703l.343.667a.75.75 0 01-.686 0l.343-.667zM1 8.513C1 5.053 3.829 2.5 6.736 2.5 9.03 2.5 10.881 3.726 12 5.605 13.12 3.726 14.97 2.5 17.264 2.5 20.17 2.5 23 5.052 23 8.514c0 3.818-2.801 7.06-5.389 9.262a31.146 31.146 0 01-5.233 3.576l-.025.013-.007.003-.002.001-.344-.666-.343.667-.003-.002-.007-.003-.025-.013A29.308 29.308 0 0110 20.408a31.147 31.147 0 01-3.611-2.632C3.8 15.573 1 12.332 1 8.514z"></path></svg></a>
          </li>
        


      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="dynamic_light_and_dark_plots_in_web_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Dynamic Light and Dark Plots in Web</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/amirmasoudabdol/sfthemes/blob/main/vignettes/dynamic_light_and_dark_plots_in_web.Rmd"><code>vignettes/dynamic_light_and_dark_plots_in_web.Rmd</code></a></small>
      <div class="hidden name"><code>dynamic_light_and_dark_plots_in_web.Rmd</code></div>

    </div>

    
    
<p>Nowadays, most modern web browsers can detect users system preferences and notify a website to deliver an accessible and customized experience to the visitors. Recently, I developed <a href="https://amirmasoudabdol.github.io/preferably">preferably</a> to take advantages of this, and customize <code>pkgdown</code> websites based on user’s preferred system appearances, e.g., <em>light/dark mode</em>. However, background and text colors are not the only elements of a website that should be adjust based on users’ preferences, figures and plots should adapt their appearances as well. Fortunately, it is possible to provide two versions of a same image and inform browsers on when to use one instead of the other. For instance, as you can see below, a light themed plot is used in the light version of the website, and a dark themed plot in the dark version.</p>
<p><img src="images/dynamic-light-and-dark-static.png"></p>
<p>While changing the text and background color can be “easily” adjusted using CSS, creating two similar, compatible, and optimized plots for light and dark appearances is not straightforward. You need a set of light/dark theme, and a collection of compatible, and optimized color scales in order to be able to deliver a <em>seamless</em> experience.</p>
<p>Here, I describe how you can achieve this behavior using my custom pkgdown template, <a href="https://amirmasoudabdol.github.io/preferably">preferably</a>, and sfthemes.</p>
<div id="instruction" class="section level2">
<h2 class="hasAnchor">
<a href="#instruction" class="anchor"></a>Instruction</h2>
<p>So, as I mentioned, what we need is two versions of the same plot, each optimized for light and dark appearance, and a method of delivering them based on the user’s system preference.</p>
<div id="creating-lightdark-plots" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-lightdark-plots" class="anchor"></a>Creating Light/Dark Plots</h3>
<p>As shown <a href="../../index.html#light-and-dark-themes">here</a>, you can produce two variants of your visualization by using <code><a href="../reference/theme_sf_light.html">theme_sf_light()</a></code> and <code><a href="../reference/theme_sf_dark.html">theme_sf_dark()</a></code> themes, and your selected color scheme in light and dark mode.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://sfthemes.amirmasoudabdol.name">sfthemes</a></span><span class="op">)</span>

<span class="va">gp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Sepal.Length</span>,
                 y <span class="op">=</span> <span class="va">Sepal.Width</span>,
                 color <span class="op">=</span> <span class="va">Species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">Species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Sepal Length"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Sepal Width"</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"SF Light/Dark Themes"</span>, 
             subtitle <span class="op">=</span> <span class="st">"iOS Light/Dark Color Palette"</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">Species</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Light</span>
<span class="va">gp</span> <span class="op">+</span> <span class="fu"><a href="../reference/theme_sf_light.html">theme_sf_light</a></span><span class="op">(</span>size_class <span class="op">=</span> <span class="st">"xxxLarge"</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="../reference/scale_colour_ios_light.html">scale_colour_ios_light</a></span><span class="op">(</span>accessible <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="../reference/scale_colour_ios_light.html">scale_fill_ios_light</a></span><span class="op">(</span>accessible <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="st">"theme-sf-light.png"</span><span class="op">)</span>

<span class="co"># Dark</span>
<span class="va">gp</span> <span class="op">+</span> <span class="fu"><a href="../reference/theme_sf_dark.html">theme_sf_dark</a></span><span class="op">(</span>size_class <span class="op">=</span> <span class="st">"xxxLarge"</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="../reference/scale_colour_ios_dark.html">scale_colour_ios_dark</a></span><span class="op">(</span>accessible <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="../reference/scale_colour_ios_dark.html">scale_fill_ios_dark</a></span><span class="op">(</span>accessible <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="st">"theme-sf-dark.png"</span><span class="op">)</span></code></pre></div>
<table class="table"><tbody><tr class="odd">
<td><img src="../man/figures/front-page-sample-light.png"></td>
<td><img src="../man/figures/front-page-sample-dark.png"></td>
</tr></tbody></table>
</div>
<div id="markdown-integration" class="section level3">
<h3 class="hasAnchor">
<a href="#markdown-integration" class="anchor"></a>Markdown Integration</h3>
<p>Now that we have our plots, we can use HTML’s <a href="https://www.w3schools.com/TAgs/att_source_srcset.asp"><code>&lt;picture&gt;</code> and <code>&lt;source&gt;</code></a> tags and set a different image to <code>&lt;img href=“”&gt;</code> based on website’s appearance. For example, the code block below makes sure that <code>theme-sf-dark.png</code> will be the source when the user seeing a dark version of the website.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">&lt;picture&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>    <span class="kw">&lt;source</span><span class="ot"> srcset=</span><span class="st">"reference/figures/theme-sf-dark.png"</span><span class="ot"> media=</span><span class="st">"(prefers-color-scheme: dark)"</span><span class="kw">/&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="kw">&lt;img</span><span class="ot"> src=</span><span class="st">"man/figures/theme-sf-light.png"</span><span class="kw">/&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="kw">&lt;/picture&gt;</span></span></code></pre></div>
<p>Don’t be alarmed by the use of HTML, you don’t necessarily need to edit your HTML files, in fact, you can just write this inside your markdown files. Most Markdown parsers are smart enough to detect this as a piece of HTML code, and simply inject it into the rendered HTML. For instance, you can see that <a href="https://github.com/amirmasoudabdol/sfthemes/blob/main/vignettes/dynamic_light_and_dark_plots_in_web.Rmd">this page</a> is generated using from a markdown file, using <code>rmarkdown</code>.</p>
<p>The figure below is created using the above snippet, and will change based on your preference.</p>
<p><picture><source srcset="../reference/figures/front-page-sample-dark.png" media="(prefers-color-scheme: dark)"></source><img src="../reference/figures/front-page-sample-light.png"></picture></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://amirmasoudabdol.name">Amir Masoud Abdol</a>.</p>
</div>

<div class="pkgdown">
  <p>Made with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1, using <a href="https://preferably.amirmasoudabdol.name/?source=footer">preferably</a> template.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
